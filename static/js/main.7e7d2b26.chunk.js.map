{"version":3,"sources":["components/TitleInput/TitleInput.jsx","api/index.js","App.js","index.js","components/TitleInput/TitleInput.module.css","App.module.css"],"names":["TitleInput","props","className","styles","container","title","randomPageTitle","href","onSubmit","event","preventDefault","inputDataSubmit","action","type","placeholder","value","inputData","onChange","handleChange","autoFocus","ref","searchInput","recContainer","undefined","recommendedArr","map","curr","index","key","recommendations","onClick","a","setInputData","replace","setRecomPressed","handleFocus","url","pages","subCats","fetchPush","category","fetch","urlFetch","json","categorymembers","query","element","push","newCat","newSubCat","randomSubCatIndex","Math","floor","random","length","randomSubCat","splice","randomPageIndex","randomPage","recommendedFunc","data","recomendedFetch","recommendedData","App","useState","prevInputData","setPrevInputData","setRecommendedArr","recomPressed","setRandomPage","useEffect","dataTransf","fetchedData","submitData","dataToFetch","useRef","e","target","current","focus","ReactDOM","render","document","getElementById","module","exports"],"mappings":"sOAwEeA,EArEI,SAACC,GAClB,OACE,yBAAKC,UAAWC,IAAOC,WAErB,wBAAIF,UAAWC,IAAOE,OACO,WAA1BJ,EAAMK,gBACLL,EAAMK,gBAAkB,IAExB,uBACEC,KAAM,iCAAmCN,EAAMK,gBAC/CJ,UAAWC,IAAOG,iBAEjBL,EAAMK,gBAAkB,KAR/B,yBAcA,0BACEE,SAAU,SAACC,GACTA,EAAMC,iBACNT,EAAMU,oBAGR,2BACEC,OAAO,GACPC,KAAK,OACLC,YAAY,GACZC,MAAOd,EAAMe,UACbC,SAAUhB,EAAMiB,aAChBC,WAAS,EACTC,IAAKnB,EAAMoB,eAGf,wBAAInB,UAAWC,IAAOE,OAAtB,aAUA,yBAAKH,UAAWC,IAAOmB,mBAGMC,IAAzBtB,EAAMuB,eACFvB,EAAMuB,eAAeC,KAAI,SAACC,EAAMC,GAAP,OACvB,4BACEC,IAAKD,EACLzB,UAAWC,IAAO0B,gBAClBhB,KAAK,SACLiB,QAAO,sBAAE,sBAAAC,EAAA,sDACP9B,EAAM+B,aAAaN,EAAKO,QAAQ,aAAc,KAC9ChC,EAAMiC,iBAAgB,GACtBjC,EAAMkC,cAHC,4CAMRT,EAAKO,QAAQ,aAAc,QAGhC,Q,uBC9DVG,EAAM,GACNC,EAAQ,GACRC,EAAU,GAERC,EAAS,uCAAG,WAAOC,GAAP,iCAAAT,EAAA,sEACOU,MAAML,GADb,cACVM,EADU,gBAINA,EAASC,OAJH,gBAGLC,EAHK,EAGdC,MAASD,gBAHK,iCAMYA,GANZ,4HAOO,UADNE,EAND,GAOFjC,KACVwB,EAAMU,KAAKD,EAAQzC,MAAM4B,QAAQ,SAAU,MAE3CK,EAAQS,KACND,EAAQzC,MAAM4B,QAAQ,aAAc,IAAIA,QAAQ,SAAU,MAXhD,sXAAH,sDAkBFe,EAAM,uCAAG,WAAOR,GAAP,SAAAT,EAAA,6DAEpBM,EAAQ,GACRC,EAAU,GAEVF,EAAG,gGAA4FI,EAA5F,0EALiB,SAOdD,EAAUC,GAPI,gCASbS,KATa,2CAAH,sDAaNA,EAAS,uCAAG,kCAAAlB,EAAA,6DACjBmB,EAAoBC,KAAKC,MAAMD,KAAKE,SAAWf,EAAQgB,QACvDC,EAAejB,EAAQY,GAE7BZ,EAAQkB,OAAON,EAAmB,GAGlCd,EAAG,gGAA4FmB,EAA5F,mEAPoB,SASjBhB,IATiB,cAYjBkB,EAAkBN,KAAKC,MAAMD,KAAKE,SAAWhB,EAAMiB,QACnDI,EAAarB,EAAMoB,GAEzBpB,EAAMmB,OAAOC,EAAiB,GAfP,kBAiBhBC,EAAWzB,QAAQ,SAAU,MAjBb,4CAAH,qDAuBT0B,EAAe,uCAAG,WAAOC,GAAP,iBAAA7B,EAAA,sEACCU,MAAM,wGAAD,OACuEmB,EADvE,cADN,cACvBC,EADuB,gBAICA,EAAgBlB,OAJjB,cAIvBmB,EAJuB,yBAKtBA,EAAgB,IALM,2CAAH,sDCGbC,EAzDH,WAAO,IAAD,EACkBC,mBAAS,IAD3B,mBACThD,EADS,KACEgB,EADF,OAE0BgC,mBAAS,IAFnC,mBAETC,EAFS,KAEMC,EAFN,OAG4BF,mBAAS,IAHrC,mBAGTxC,EAHS,KAGO2C,EAHP,OAIwBH,oBAAS,GAJjC,mBAITI,EAJS,KAIKlC,EAJL,OAKoB8B,mBAAS,UAL7B,mBAKTN,EALS,KAKGW,EALH,KAQhBC,qBAAU,YACS,uCAAG,4BAAAvC,EAAA,sEACO4B,EAAgB3C,GADvB,OACZuD,EADY,OAElBJ,EAAkBI,GAFA,2CAAH,qDAIjBC,KACC,CAACxD,IAEJsD,qBAAU,YACa,IAAjBF,GACFK,EAAWzD,GAEbkB,GAAgB,KACf,EAAkB,IAAjBkC,IAEJ,IAAMK,EAAU,uCAAG,WAAOC,GAAP,eAAA3C,EAAA,yDACbyC,EAAc,GACE,KAAhBE,GAAsBA,IAAgBT,EAFzB,gCAGKjB,EAAO0B,EAAYzC,QAAQ,SAAU,MAH1C,OAGfuC,EAHe,OAIfN,EAAiBQ,GAJF,0BAKU,KAAhBA,GAAsBA,IAAgBT,EALhC,kCAMKhB,EAAUyB,EAAYzC,QAAQ,SAAU,MAN7C,QAMfuC,EANe,eAQjBH,EAAcG,GARG,4CAAH,sDAWVnD,EAAcsD,iBAAO,MAM3B,OACE,yBAAKzE,UAAWC,IAAOC,WACrB,kBAAC,EAAD,CACEY,UAAWA,EACXE,aAAc,SAAC0D,GAAD,OAAO5C,EAAa4C,EAAEC,OAAO9D,QAC3CJ,gBAAiB,kBAAM8D,EAAWzD,IAClCV,gBAAiBoD,EACjBlC,eAAgBA,EAChBQ,aAAcA,EACdE,gBAAiBA,EACjBC,YAdc,WAClBd,EAAYyD,QAAQC,SAchB1D,YAAaA,MCrDrB2D,IAASC,OAAO,kBAAC,EAAD,MAASC,SAASC,eAAe,U,kBCJjDC,EAAOC,QAAU,CAAC,UAAY,8BAA8B,MAAQ,0BAA0B,gBAAkB,oCAAoC,aAAe,iCAAiC,gBAAkB,sC,kBCAtND,EAAOC,QAAU,CAAC,UAAY,yB","file":"static/js/main.7e7d2b26.chunk.js","sourcesContent":["import React from \"react\";\nimport styles from \"./TitleInput.module.css\";\n\nconst TitleInput = (props) => {\n  return (\n    <div className={styles.container}>\n      {/* Link needs to be more obvious. */}\n      <h1 className={styles.title}>\n        {props.randomPageTitle === \"Random\" ? (\n          props.randomPageTitle + \" \"\n        ) : (\n          <a\n            href={\"https://en.wikipedia.org/wiki/\" + props.randomPageTitle}\n            className={styles.randomPageTitle}\n          >\n            {props.randomPageTitle + \" \"}\n          </a>\n        )}\n        WIKIPEDIA PAGE OF THE\n      </h1>\n\n      <form\n        onSubmit={(event) => {\n          event.preventDefault();\n          props.inputDataSubmit();\n        }}\n      >\n        <input\n          action=\"\"\n          type=\"text\"\n          placeholder=\"\"\n          value={props.inputData}\n          onChange={props.handleChange}\n          autoFocus\n          ref={props.searchInput}\n        />\n      </form>\n      <h1 className={styles.title}>CATEGORY.</h1>\n\n      {/* https://reactgo.com/react-focus-input/\n      Need to set the focus after pressing the recommendations button, according to this I can invoke a function on the button click for it */}\n\n      {/* To improve I can remove the B-Class and Uppercase the word after. Check the recommendations with B inputData */}\n\n      {/* https://stackoverflow.com/questions/54069253/usestate-set-method-not-reflecting-change-immediately\n      According to this it means that states are only updated after each render, in this case because the function is within another function meaning a closure the state is still undefined. The fix is to always use useEffect for these fetches, only not when we need to get another random result. But maybe even then it would work with if statments on the useEffect, I just cannot be updating states there for some reason. */}\n\n      <div className={styles.recContainer}>\n        {\n          /* ternary to not attempt to render the initial undefined value */\n          props.recommendedArr !== undefined\n            ? props.recommendedArr.map((curr, index) => (\n                <button\n                  key={index}\n                  className={styles.recommendations}\n                  type=\"button\"\n                  onClick={async () => {\n                    props.setInputData(curr.replace(/Category:/g, \"\"));\n                    props.setRecomPressed(true);\n                    props.handleFocus();\n                  }}\n                >\n                  {curr.replace(/Category:/g, \"\")}\n                </button>\n              ))\n            : null\n        }\n      </div>\n    </div>\n  );\n};\n\nexport default TitleInput;\n","// To do here:\n// If the picked subcat has no pages (probably only subcats) fetch a level deeper?  In total it's first Category Fetch, second SubCat fetch, and third random subCat fetch. For a new random it's simply 2 fetches. So not that many unless you're very unlucky.\n\nlet url = \"\";\nlet pages = [];\nlet subCats = [];\n\nconst fetchPush = async (category) => {\n  const urlFetch = await fetch(url);\n  const {\n    query: { categorymembers },\n  } = await urlFetch.json();\n\n  for await (const element of categorymembers) {\n    if (element.type === \"page\") {\n      pages.push(element.title.replace(/[\" \"]/g, \"_\"));\n    } else {\n      subCats.push(\n        element.title.replace(/Category:/g, \"\").replace(/[\" \"]/g, \"_\")\n      );\n    }\n  }\n};\n\n// Called when a new category is entered\nexport const newCat = async (category) => {\n  // Resetting for the new category.\n  pages = [];\n  subCats = [];\n\n  url = `https://en.wikipedia.org/w/api.php?action=query&list=categorymembers&cmtitle=Category:${category}&cmprop=title|type&format=json&cmlimit=500&cmtype=page|subcat&origin=*`;\n\n  await fetchPush(category);\n\n  return newSubCat();\n};\n\n// Called when a category is already entered but user wants another result\nexport const newSubCat = async () => {\n  const randomSubCatIndex = Math.floor(Math.random() * subCats.length);\n  const randomSubCat = subCats[randomSubCatIndex];\n  // Removing the subCat so that it won't be re-picked.\n  subCats.splice(randomSubCatIndex, 1);\n\n  // Global category doesn't seem to work so I am changing the url here.\n  url = `https://en.wikipedia.org/w/api.php?action=query&list=categorymembers&cmtitle=Category:${randomSubCat}&cmprop=title|type&format=json&cmlimit=500&cmtype=page&origin=*`;\n\n  await fetchPush();\n\n  // Random article in pages\n  const randomPageIndex = Math.floor(Math.random() * pages.length);\n  const randomPage = pages[randomPageIndex];\n  // Removing the article page so that it won't be re-picked\n  pages.splice(randomPageIndex, 1);\n\n  return randomPage.replace(/[\"_\"]/g, \" \");\n};\n\n///////////////////////////////////////////////////////////////////////\n///////////////////////////////////////////////////////////////////////\n\nexport const recommendedFunc = async (data) => {\n  const recomendedFetch = await fetch(\n    `https://en.wikipedia.org/w/api.php?action=opensearch&format=json&limit=6&namespace=14&suggest&search=${data}&origin=*`\n  );\n  const recommendedData = await recomendedFetch.json(); // Can't seem to destructure it.\n  return recommendedData[1];\n};\n","import React, { useState, useEffect, useRef } from \"react\";\n\nimport { TitleInput } from \"./components\";\nimport styles from \"./App.module.css\";\n\nimport { newCat, newSubCat, recommendedFunc } from \"./api\";\n\nconst App = () => {\n  const [inputData, setInputData] = useState(\"\");\n  const [prevInputData, setPrevInputData] = useState(\"\");\n  const [recommendedArr, setRecommendedArr] = useState([]);\n  const [recomPressed, setRecomPressed] = useState(false);\n  const [randomPage, setRandomPage] = useState(\"Random\");\n\n  // useEffect is returning an array of recommended searches based on input and in return we are rendering that array with .map to create several recommendations in the form of buttons.\n  useEffect(() => {\n    const fetchedData = async () => {\n      const dataTransf = await recommendedFunc(inputData);\n      setRecommendedArr(dataTransf);\n    };\n    fetchedData();\n  }, [inputData]);\n\n  useEffect(() => {\n    if (recomPressed === true) {\n      submitData(inputData);\n    }\n    setRecomPressed(false);\n  }, [recomPressed === true]);\n\n  const submitData = async (dataToFetch) => {\n    let fetchedData = \"\";\n    if (dataToFetch !== \"\" && dataToFetch !== prevInputData) {\n      fetchedData = await newCat(dataToFetch.replace(/[\" \"]/g, \"_\"));\n      setPrevInputData(dataToFetch);\n    } else if (dataToFetch !== \"\" && dataToFetch === prevInputData) {\n      fetchedData = await newSubCat(dataToFetch.replace(/[\" \"]/g, \"_\"));\n    }\n    setRandomPage(fetchedData);\n  };\n\n  const searchInput = useRef(null);\n\n  const handleFocus = () => {\n    searchInput.current.focus();\n  };\n\n  return (\n    <div className={styles.container}>\n      <TitleInput\n        inputData={inputData}\n        handleChange={(e) => setInputData(e.target.value)}\n        inputDataSubmit={() => submitData(inputData)}\n        randomPageTitle={randomPage}\n        recommendedArr={recommendedArr}\n        setInputData={setInputData}\n        setRecomPressed={setRecomPressed}\n        handleFocus={handleFocus}\n        searchInput={searchInput}\n      />\n    </div>\n  );\n};\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\n\nimport App from './App';\n\nReactDOM.render(<App />, document.getElementById('root'));","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"TitleInput_container__3dgiA\",\"title\":\"TitleInput_title__3gK_J\",\"randomPageTitle\":\"TitleInput_randomPageTitle__3rebV\",\"recContainer\":\"TitleInput_recContainer__2Biyz\",\"recommendations\":\"TitleInput_recommendations__jvOg2\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"App_container__1MQN3\"};"],"sourceRoot":""}