{"version":3,"sources":["components/TitleInput/TitleInput.jsx","api/index.js","App.js","index.js","components/TitleInput/TitleInput.module.css","App.module.css"],"names":["TitleInput","props","className","styles","container","title","onSubmit","event","preventDefault","inputDataSubmit","action","type","placeholder","value","inputData","onChange","handleChange","autoFocus","url","pages","subCats","fetchPush","category","a","fetch","urlFetch","json","categorymembers","query","element","push","replace","newCat","console","log","newSubCat","randomSubCatIndex","Math","floor","random","length","randomSubCat","splice","randomPageIndex","randomPage","recommendedFunc","data","recomendedFetch","recommendedData","App","useState","setInputData","prevInputData","setPrevInputData","recommendedArr","setRecommendedArr","useEffect","dataTransf","fetchedData","submitData","dataToFetch","e","target","recContainer","undefined","map","curr","index","key","recommendations","onClick","ReactDOM","render","document","getElementById","module","exports"],"mappings":"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","file":"static/js/main.5f37a297.chunk.js","sourcesContent":["import React from 'react';\nimport styles from './TitleInput.module.css';\n\nconst TitleInput = (props) => {\n  return (\n    <div className={styles.container}>\n    \n     {/* The word random could be substituted for the result and a new wikipedia page is provided and be a link that the person could press. */}\n      <h1 className={styles.title}>\n        RANDOM WIKIPEDIA PAGE OF THE\n      </h1>\n      \n      {/* Have it focus on the input field when the page is loaded and everything being done with enter */}\n      \n      {/* See what else is required in the form if it is required at all */}\n      <form \n        onSubmit={ (event) => {\n          event.preventDefault();\n          props.inputDataSubmit();\n        } }\n        // action=\"javascript:void(0);\"\n      >\n        <input\n          action=\"\"\n          type=\"text\"\n          placeholder=\"\"\n          value={props.inputData}\n          onChange={props.handleChange} \n          autoFocus\n        />\n\n        {/* Have the button work with enter key press */}\n        {/* The button must be the problem, it must be refreshing the page or something and losing the states! */}\n        {/* <button\n          type=\"button\" \n          className={styles.searchButton}\n          onClick={props.inputDataSubmit}\n        >\n          <i className={styles.icon} class=\"fa fa-search\" aria-hidden=\"true\"></i>\n        </button> */}\n      </form>\n      <h1 className={styles.title}>\n        CATEGORY.\n      </h1>\n    </div>\n  )\n}\n\nexport default TitleInput;","// have it at 1 for level deep as standard.\n// Is it possible to have several levels deep without pulling several of them?Currently first fetch pulls pages and subcats. subsubcats would require 2 fetches for??\n\n// To do here:\n// If the picked subcat has no pages (probably only subcats) fetch a level deeper?  In total it's first Category Fetch, second SubCat fetch, and third random subCat fetch. For a new random it's simply 2 fetches. So not that many unless you're very unlucky.\n\n// Found an issue, the pages needs to reset after a new search is provided. This has likely seemed like a bug before when trying botany and then football \n\n\nlet url = \"\";\nlet pages = [];\nlet subCats = [];\n\n\nconst fetchPush = async (category) => {\n  const urlFetch = await fetch(url);\n  const { query: { categorymembers } } = await urlFetch.json();\n  \n  for await (const element of categorymembers) {\n    if (element.type === \"page\") {\n      pages.push(element.title\n        .replace(/[\" \"]/g, \"_\"));\n    } else {\n      subCats.push(element.title\n        .replace(/Category:/g, \"\")\n        .replace(/[\" \"]/g, \"_\"));\n    }\n  };\n  // Only to try and read elsewhere\n  // return categorymembers;\n}\n\n// Called when a new category is entered\nexport const newCat = async (category) => {\n\n  // Resetting for the new category.\n  pages = [];\n  subCats = [];\n\n  console.log(`newCat as been invoked`);\n\n  url = `https://en.wikipedia.org/w/api.php?action=query&list=categorymembers&cmtitle=Category:${category}&cmprop=title|type&format=json&cmlimit=500&cmtype=page|subcat`;\n\n  await fetchPush(category);\n\n  await newSubCat();\n  \n};\n\n// Called when a category is already entered but user wants another result\nexport const newSubCat = async () => {\n  const randomSubCatIndex = Math.floor(Math.random() * subCats.length);\n  const randomSubCat = subCats[randomSubCatIndex];\n  // Removing the subCat so that it won't be re-picked.\n  subCats.splice(randomSubCatIndex, 1);\n  \n  // Global category doesn't seem to work so I am changing the url here.\n  url = `https://en.wikipedia.org/w/api.php?action=query&list=categorymembers&cmtitle=Category:${randomSubCat}&cmprop=title|type&format=json&cmlimit=500&cmtype=page`;\n\n  await fetchPush();\n  \n  \n  // Random article in pages\n  const randomPageIndex = Math.floor(Math.random() * pages.length);\n  const randomPage = pages[randomPageIndex];\n  // Removing the article page so that it won't be re-picked\n  pages.splice(randomPageIndex, 1);\n  \n  \n  //Cannot get this to console.log, even though in fetchPush categorymembers in being returned, it simply says that it is not defined as if this console.log is running first. Maybe I still don't understand await. read the article in DEV.\n  // console.log(`categorymembers ${categorymembers}`);\n  console.log(`Random Page = ${randomPage}`);\n  \n  return randomPage;\n};\n\n\n\n\n///////////////////////////////////////////////////////////////////////\n///////////////////////////////////////////////////////////////////////\n\n\n\nexport const recommendedFunc = async (data) => {\n  const recomendedFetch = await fetch(`https://en.wikipedia.org/w/api.php?action=opensearch&format=json&limit=8&namespace=14&suggest&search=${data}`);\n  const recommendedData = await recomendedFetch.json(); // Can't seem to destructure it.\n  return recommendedData[1];\n};","import React, { useState, useEffect } from 'react';\n\nimport { TitleInput } from './components';\nimport styles from './App.module.css';\n\nimport { newCat, newSubCat, recommendedFunc } from './api';\n\nconst App = () => {\n\n  const [ inputData, setInputData ] = useState(\"\")\n  const [ prevInputData, setPrevInputData ] = useState(\"\")\n  const [ recommendedArr, setRecommendedArr ] = useState([])\n   \n  // useEffect is returning an array of recommended searches.\n  // In return we are rendering that array with .map to create several <a>.\n  // In CSS the <a> will be edited so that it shows neatly underneath like the codePen example.\n  \n  useEffect(() => {\n    const fetchedData = async () => {\n    const dataTransf = await recommendedFunc(inputData);\n    setRecommendedArr(dataTransf)\n   };\n   fetchedData();\n  }, [inputData]);\n\n  const submitData = async (dataToFetch) => {\n    if (dataToFetch !== \"\" && dataToFetch !== prevInputData) {\n      await newCat(dataToFetch.replace(/[\" \"]/g, \"_\"));\n      setPrevInputData(dataToFetch);\n    } else if (dataToFetch !== \"\" && dataToFetch === prevInputData) {\n      await newSubCat(dataToFetch.replace(/[\" \"]/g, \"_\"));\n    }\n  }\n\n\n  return (\n    <div className={styles.container}>\n      <TitleInput\n        inputData={ inputData }\n        handleChange={ (e) => setInputData(e.target.value) } \n        inputDataSubmit={ () => submitData(inputData) }\n      />\n      \n      {/* To improve I can remove the B-Class and Uppercase the word after. Check the recommendations with B inputData */}\n      \n      {/* The recommendations should also not only add to inputData but also search it straight away.\n      I've implemented that but it is not fully working, the search is giving undefined, meaning probably because inputData at the time is undefined, I have to console.log it */}\n      \n      <div className={styles.recContainer}> \n        { /* ternary to not attempt to render the initial undefined value */\n        (recommendedArr !== undefined)\n          ? ( recommendedArr.map( (curr, index) => (\n              <button\n                key={index}\n                className={styles.recommendations}\n                type=\"button\"\n                onClick={ async () => {\n                  await setInputData(curr\n                    .replace(/Category:/g, \"\"))\n                  submitData(inputData)\n                }\n                }\n              >\n                {curr\n                  .replace(/Category:/g, \"\")\n                }\n              </button>\n            )) )\n          : null\n        }\n      </div>\n    </div>\n  );\n}\n\n\n// App done whilst following a youtube video regarding a different app done with React\n// Left off at ####\n// https://www.youtube.com/watch?v=khJlrj3Y6Ls\n// Compare with this one to understand\n// https://www.youtube.com/watch?v=U9T6YkEDkMo\n\nexport default App;","import React from 'react';\nimport ReactDOM from 'react-dom';\n\nimport App from './App';\n\nReactDOM.render(<App />, document.getElementById('root'));","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"TitleInput_container__3dgiA\",\"title\":\"TitleInput_title__3gK_J\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"App_container__1MQN3\",\"recContainer\":\"App_recContainer__wWg8r\",\"recommendations\":\"App_recommendations__174uK\"};"],"sourceRoot":""}